jQuery(document).ready(function(t){function e(t){for(t=t.toString();;){var e=t.replace(/(\d)(\d{3})($|,|\.)/g,"$1,$2$3");if(t==e)break;t=e}return t}function i(t){return t.replace(".",",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}function a(){var t=0;return jQuery(".input-ctlggi-single-item-total").each(function(){t+=+this.value}),t}function r(t){var e=document.cookie,i=t+"=",a=e.indexOf("; "+i);if(-1==a){if(0!=(a=e.indexOf(i)))return null}else{a+=2;var r=document.cookie.indexOf(";",a);-1==r&&(r=e.length)}return unescape(e.substring(a+i.length,r))}function g(){jQuery(".show-return-data").empty();var t=jQuery(this),e=jQuery(this).serialize();return jQuery.ajax({type:"POST",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_remove_from_cart_form_process",formData:e},success:function(e){t.closest("tr").remove(),jQuery(".html-ctlggi-items-price-in-total span.ctlggi-item-price").html(e),jQuery("input.input-ctlggi-items-price-in-total").val(e)}}),!1}function l(){jQuery(".show-login-form-return-data").empty();var t=jQuery(this).serialize();return jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_login_form_process",formData:t},success:function(t){jQuery(".show-login-form-return-data").show().prepend(t.message),jQuery(".show-login-form-return-data").delay(5e3).fadeOut(1600),1==t.loggedin&&(document.location.href=ctlggi_ajax_shopping_cart.ctlggi_login_redirect_url)}}),!1}function c(){jQuery(".show-register-form-return-data").empty();var t=jQuery(this).serialize();return jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_register_form_process",formData:t},success:function(t){jQuery(".show-register-form-return-data").show().prepend(t.message),jQuery(".show-register-form-return-data").delay(15e3).fadeOut(1600)}}),!1}function o(){jQuery(".show-forgot-pw-form-return-data").empty();var t=jQuery(this).serialize();return jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_forgot_pw_form_process",formData:t},success:function(t){jQuery(".show-forgot-pw-form-return-data").show().prepend(t.message),jQuery(".show-forgot-pw-form-return-data").delay(15e3).fadeOut(1600)}}),!1}function n(){jQuery(".show-contact-form-return-data").empty();var t=jQuery(this).serialize();return jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_contact_form_process",formData:t},success:function(t){jQuery(".show-contact-form-return-data").show().prepend(t.message),jQuery("#ctlggi-contact-form-holder").hide()}}),!1}function s(t){t.preventDefault();jQuery("#ctlggi-checkout-form");jQuery(".show-checkout-form-return-data").empty();var e=jQuery(this).serialize();return jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_checkout_form_process",formData:e},success:function(t){}}),!1}function u(t){if(t.preventDefault(),"none"==jQuery(".ctlggi-current-gateway").val()){jQuery(".ctlggi-payment-gateway-messages").html(""),jQuery(".ctlggi-payment-gateway-messages").hide();var e=jQuery(this).serialize();jQuery(".ctlggi-loading-img").show();var i=ctlggi_ajax_shopping_cart.ctlggi_form_loader_img;jQuery(".ctlggi-loading-img").html('<img src="'+i+'" width="128" height="15" alt="loading..." />'),jQuery("#ctlggi-checkout-form-submit").attr("disabled","disabled"),setTimeout(function(){jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_process_none_payment",formData:e},success:function(t){jQuery("#ctlggi-checkout-form-submit").attr("disabled",!1),jQuery(".ctlggi-loading-img").hide(),0==t.checkoutsuccess?jQuery(".ctlggi-payment-gateway-messages").show().prepend(t.message):(jQuery("#ctlggi-returning-customer-div").hide(),jQuery("#ctlggi-show-hide-login-form").hide(),jQuery("#ctlggi-payment-methods-holder").hide(),jQuery("#ctlggi-checkout-form").hide(),jQuery("#ctlggi-terms-link").hide(),"0"!=ctlggi_ajax_shopping_cart.ctlggi_success_redirect_url?document.location.href=ctlggi_ajax_shopping_cart.ctlggi_success_redirect_url:jQuery(".ctlggi-payment-gateway-messages").show().prepend(t.message))}})},2e3)}return!1}function d(t){if(t.preventDefault(),"bacs"==jQuery(".ctlggi-current-gateway").val()){jQuery(".ctlggi-payment-gateway-messages").html(""),jQuery(".ctlggi-payment-gateway-messages").hide();var e=jQuery(this).serialize();jQuery(".ctlggi-loading-img").show();var i=ctlggi_ajax_shopping_cart.ctlggi_form_loader_img;jQuery(".ctlggi-loading-img").html('<img src="'+i+'" width="128" height="15" alt="loading..." />'),jQuery("#ctlggi-checkout-form-submit").attr("disabled","disabled"),setTimeout(function(){jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_process_bacs_payment",formData:e},success:function(t){jQuery("#ctlggi-checkout-form-submit").attr("disabled",!1),jQuery(".ctlggi-loading-img").hide(),0==t.checkoutsuccess?jQuery(".ctlggi-payment-gateway-messages").show().prepend(t.message):(jQuery("#ctlggi-returning-customer-div").hide(),jQuery("#ctlggi-show-hide-login-form").hide(),jQuery("#ctlggi-payment-methods-holder").hide(),jQuery("#ctlggi-checkout-form").hide(),jQuery("#ctlggi-terms-link").hide(),"0"!=ctlggi_ajax_shopping_cart.ctlggi_success_redirect_url?document.location.href=ctlggi_ajax_shopping_cart.ctlggi_success_redirect_url:jQuery(".ctlggi-payment-gateway-messages").show().prepend(t.message))}})},2e3)}return!1}function y(t){if(t.preventDefault(),"paypalstandard"==jQuery(".ctlggi-current-gateway").val()){jQuery(".ctlggi-payment-gateway-messages").html(""),jQuery(".ctlggi-payment-gateway-messages").hide();var e=jQuery(this).serialize();jQuery(".ctlggi-loading-img").show();var i=ctlggi_ajax_shopping_cart.ctlggi_form_loader_img;jQuery(".ctlggi-loading-img").html('<img src="'+i+'" width="128" height="15" alt="loading..." />'),jQuery("#ctlggi-checkout-form-submit").attr("disabled","disabled"),setTimeout(function(){jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_process_paypalstandard_payment",formData:e},success:function(t){if(jQuery("#ctlggi-checkout-form-submit").attr("disabled",!1),jQuery(".ctlggi-loading-img").hide(),0==t.checkoutsuccess)jQuery(".ctlggi-payment-gateway-messages").show().prepend(t.message);else{jQuery("#ctlggi-returning-customer-div").hide(),jQuery("#ctlggi-show-hide-login-form").hide(),jQuery("#ctlggi-payment-methods-holder").hide(),jQuery("#ctlggi-checkout-form").hide(),jQuery("#ctlggi-terms-link").hide();var e=t.redirecturl;document.location.href=e}}})},2e3)}return!1}jQuery(".cw-form").on("change",".ctlggi_categories_drop_down_class",function(t){var e=jQuery(this).val();e&&(document.location.href=e)}),jQuery(".ctlggi-payment-buttons-wrapper .ctlggi-buy-now-form-class").on("change",".ctlggi-price-options",function(t){var e=jQuery(this).attr("id"),i="#ctlggi_price_options_select_"+e,a=jQuery(i+" :selected").attr("ctlggi-data-sale-price-hidden");jQuery(i+" :selected").val();jQuery("#ctlggi_buy_now_button_"+e+" input.ctlggi_item_price_class").val(a),jQuery("#ctlggi_buy_now_button_"+e+" span.ctlggi-item-price").html(a)}),jQuery(".ctlggi-payment-buttons-wrapper .ctlggi-add-to-cart-form-class").on("change",".ctlggi-price-options",function(t){var e=jQuery(this).attr("id"),i="#ctlggi_price_options_select_"+e,a=jQuery(i+" :selected").attr("ctlggi-data-sale-price-hidden");jQuery(i+" :selected").val();jQuery("#ctlggi_add_to_cart_button_"+e+" input.ctlggi_item_price_class").val(a),jQuery("#ctlggi_add_to_cart_button_"+e+" span.ctlggi-item-price").html(a)}),jQuery(".ctlggi-payment-buttons-wrapper .ctlggi-add-to-cart-form-submit").on("click",function(t){var e="#ctlggi_add_to_cart_form_"+this.id,i=jQuery(".ctlggi_cart_items_cookie_name_class").val(),a=jQuery(e).serialize(),g=jQuery(e+" #ctlggi_item_id").val(),l=r(i),c=parseInt(jQuery(".input-ctlggi-basket-items").val())+1;jQuery(".input-ctlggi-basket-items").val(c),jQuery("span.cataloggi-shopping-basket-items").html(c);JSON.parse(l);return jQuery.ajax({type:"POST",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_payment_buttons_process",formData:a},success:function(t){jQuery("#ctlggi_add_to_cart_button_"+g+" #ctlggi-payment-button-1").hide(),jQuery("#ctlggi_add_to_cart_button_"+g+" #ctlggi-payment-button-2").show()}}),!1}),jQuery(".ctlggi-remove-from-cart-form").submit(g),jQuery(".ctlggi-update-cart").click(function(){var t=[],r=jQuery("input.input-ctlggi-thousand-separator").val();jQuery("#ctlggi-cart-table tr.ctlggi-cart-item").each(function(){var a=jQuery(this),g=a.find("input.input-ctlggi-item-id").val(),l=a.find("input.input-ctlggi-item-price").val(),c=a.find("input.input-ctlggi-item-name").val(),o=a.find("input.input-ctlggi-item-quantity").val(),n=a.find("input.input-ctlggi-item-downloadable").val(),s=a.find("input.input-ctlggi-price-option-id").val(),u=a.find("input.input-ctlggi-price-option-name").val(),d=a.find("input.input-ctlggi-item-payment-type").val(),y=a.find("input.input-ctlggi-custom-field").val(),p=a.find("input.input-ctlggi-grouped-products").val(),_=a.find("input.input-ctlggi-subsc-recurring").val(),m=a.find("input.input-ctlggi-subsc-interval").val(),j=a.find("input.input-ctlggi-subsc-interval-count").val(),f=a.find("input.input-ctlggi-subsc-times").val(),h=a.find("input.input-ctlggi-subsc-signupfee").val(),Q=a.find("input.input-ctlggi-subsc-trial").val(),b={};b.item_id=g,b.item_price=l,b.item_name=c,b.item_quantity=o,b.item_downloadable=n,b.price_option_id=s,b.price_option_name=u,b.item_payment_type=d,b.custom_field=y,b.grouped_products=p,b.subsc_recurring=_,b.subsc_interval=m,b.subsc_interval_count=j,b.subsc_times=f,b.subsc_signupfee=h,b.subsc_trial=Q,t.push(b);var w=(l*o).toFixed(2);if(","==r)v=e(w);else if("."==r)var v=i(w);a.find("span.html-ctlggi-single-item-total span.ctlggi-item-price").html(v),a.find("input.input-ctlggi-single-item-total").val(w)});var g=a().toFixed(2);if(","==r)e(g);else if("."==r)i(g);jQuery("input.input-ctlggi-items-price-in-total").val(g);var l=JSON.stringify(t);return jQuery.ajax({type:"POST",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_update_cart_process",formData:l},success:function(t){jQuery(".html-ctlggi-items-price-in-total span.ctlggi-item-price").html(t)}}),!1}),jQuery(".cataloggi-grid-buttons a").on("click",function(t){t.preventDefault();var e=jQuery(this).attr("cataloggi-grid-data-id");if("normal"==e)i="cataloggi-item-box-grid columns-3";else if("large"==e)i="cataloggi-item-box-grid columns-2";else if("list"==e)i="cataloggi-item-box-list-view";else var i="cataloggi-item-box-grid columns-3";return jQuery("#set-cataloggi-grid-view").fadeOut(500,function(){jQuery("#set-cataloggi-grid-view").attr("class",""),jQuery("#set-cataloggi-grid-view").addClass(i),jQuery("#set-cataloggi-grid-view").fadeIn(500)}),jQuery(".cataloggi-grid-buttons li a").removeClass("btn-cataloggi btn-cataloggi-sm btn-cataloggi-grey cataloggi-float-right active"),jQuery(this).addClass("btn-cataloggi btn-cataloggi-sm btn-cataloggi-grey cataloggi-float-right active"),jQuery.ajax({type:"POST",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"ctlggi_items_view_process",itemsview:i},success:function(t){}}),!1}),jQuery(".ctlggi_payment_gateway_radio").on("change",function(){var t=this.value;jQuery(".ctlggi-current-gateway").val(t),jQuery("#default_gateway_description").hide(),jQuery(".cataloggi-checkout-gateway-description").hide(),jQuery("#"+t+"_gateway_description").show(),jQuery("input.ctlggi_default_gateway_class").val(t);jQuery("#"+t+"_create_an_account").val();var e=jQuery("#"+t+"_credit_card_details").val(),i=jQuery("#"+t+"_billing_details").val();"1"==e?(jQuery(".ctlggi-credit-card-details-fields").show(),jQuery(".ctlggi-credit-card-details-fields").find("input,select").removeAttr("disabled")):(jQuery(".ctlggi-credit-card-details-fields").find("input,select").attr("disabled","disabled"),jQuery(".ctlggi-credit-card-details-fields").hide()),"1"==i?(jQuery(".ctlggi-billing-details-fields").show(),jQuery(".ctlggi-billing-details-fields").find("input,select").removeAttr("disabled")):(jQuery(".ctlggi-billing-details-fields").find("input,select").attr("disabled","disabled"),jQuery(".ctlggi-billing-details-fields").hide())}),jQuery("#ctlggi-show-hide-login-form").hide(),jQuery("#ctlggi-toggle-login-form").on("click",function(){jQuery("#ctlggi-show-hide-login-form").fadeToggle(600)}),jQuery("#ctlggi-login-form").submit(l),jQuery("#ctlggi-register-form").submit(c),jQuery("#ctlggi-forgot-pw-form").submit(o),jQuery("#ctlggi-contact-form").submit(n),jQuery(".ctlggi-loading-img").hide(),jQuery("#ctlggi-checkout-form").submit(s),jQuery(".ctlggi-loading-img").hide(),jQuery("#ctlggi-checkout-form").submit(u),jQuery(".ctlggi-loading-img").hide(),jQuery("#ctlggi-checkout-form").submit(d),jQuery(".ctlggi-loading-img").hide(),jQuery("#ctlggi-checkout-form").submit(y),jQuery(".ctlggi-payment-buttons-wrapper .ctlggi-buy-now-form-submit").on("click",function(t){var e="#ctlggi_buy_now_form_"+this.id;if(jQuery(e+" .ctlggi-loading-img").hide(),"paypalstandard"==jQuery(e+" #ctlggi_default_gateway").val()){jQuery(e+" .display-buy-now-form-response-msg").html("").hide();var i=jQuery(e).serialize(),a=(jQuery(e+" #ctlggi_item_id").val(),jQuery(e+" #ctlggi_item_price").val(),jQuery(e+" #ctlggi_item_name").val(),jQuery(e+" #ctlggi_item_downloadable").val(),jQuery(e+" #ctlggi_item_currency").val(),jQuery(e+" #ctlggi_subscription").val()),r=(jQuery(e+" #ctlggi_software_licensing").val(),jQuery(e+" #ctlggi_item_quantity").val(),jQuery(e+" #ctlggi_guest_payment").val());if(jQuery(e+" .ctlggi-price-options")&&jQuery(e+" .ctlggi-price-options").length)jQuery(e+" .ctlggi-price-options :selected").attr("ctlggi-data-option-name"),jQuery(e+" .ctlggi-price-options :selected").attr("ctlggi-data-item-payment-type");else;var g="1",l=jQuery(e+" #ctlggi_is_user_logged_in").val();if("yes"!=r&&"1"!=l){g="0";c='<span class="cw-form-txt-msgs">';c+='<span class="alert-txt-danger">Please login to complete your purchase.</span>',c+="</span>",jQuery(e+" .display-buy-now-form-response-msg").show().prepend(c),jQuery(e+" .display-buy-now-form-response-msg").delay(12e3).fadeOut(1600)}if("1"==a){g="0";var c='<span class="cw-form-txt-msgs">';c+='<span class="alert-txt-danger">PayPal Standard buy now button do not support subscription payments.</span>',c+="</span>",jQuery(e+" .display-buy-now-form-response-msg").show().prepend(c),jQuery(e+" .display-buy-now-form-response-msg").delay(12e3).fadeOut(1600)}if("1"==g){jQuery(e+" .ctlggi-loading-img").show();var o=ctlggi_ajax_shopping_cart.ctlggi_form_loader_img;jQuery(e+" .ctlggi-loading-img").html('<img src="'+o+'" width="128" height="15" alt="loading..." />'),jQuery(e).attr("disabled","disabled"),setTimeout(function(){jQuery.ajax({type:"POST",dataType:"json",url:ctlggi_ajax_shopping_cart.ctlggi_wp_ajax_url,data:{action:"paypal_standard_buy_now_form_process",formData:i},success:function(t){if(jQuery(e).attr("disabled",!1),jQuery(e+" .ctlggi-loading-img").hide(),0==t.checkoutsuccess)jQuery(e+" .display-buy-now-form-response-msg").show().prepend(t.message);else{var i=t.redirecturl;document.location.href=i}},error:function(t){}})},2e3)}}return!1}),jQuery("#ctlggi_billing_country").on("change",function(){var t=jQuery("#ctlggi_billing_country option:selected").attr("data-billing-country-code");"1"==jQuery("#ctlggi_billing_country option:selected").attr("data-billing-state-drop-display")?(jQuery("#ctlggi-billing-country-state-field").hide(),jQuery("#ctlggi-billing-country-state-dropdown").show(),jQuery("#ctlggi-billing-country-state-field :input").attr("disabled","disabled"),jQuery("#ctlggi-billing-country-state-dropdown select").removeAttr("disabled"),jQuery("#ctlggi-billing-country-state-dropdown select").prop("selectedIndex",0),jQuery("#ctlggi-billing-country-state-dropdown select").children("option").hide(),jQuery("#ctlggi-billing-country-state-dropdown #ctlggi_billing_states_"+t).show()):(jQuery("#ctlggi-billing-country-state-field").show(),jQuery("#ctlggi-billing-country-state-dropdown").hide(),jQuery("#ctlggi-billing-country-state-dropdown select").attr("disabled","disabled"),jQuery("#ctlggi-billing-country-state-field :input").removeAttr("disabled"))}),jQuery(".ctlggi_payment_gateway_radio").on("change",function(){var t=this.value;"paymentsform"==jQuery("#ctlggi-checkout-form #ctlggi_form_type").val()&&("1"==jQuery("#"+t+"_billing_details").val()?0!=jQuery("#ctlggi-billing-country-state-field .ctlggi_billing_state_input_class").val().trim()&&(jQuery("#ctlggi-billing-country-state-dropdown select").attr("disabled","disabled"),jQuery("#ctlggi-billing-country-state-field :input").removeAttr("disabled")):(jQuery("#ctlggi-billing-country-state-dropdown select").removeAttr("disabled"),jQuery("#ctlggi-billing-country-state-field :input").attr("disabled","disabled")))}),jQuery(".cataloggi-log-reg-buttons a").on("click",function(t){t.preventDefault();var e=jQuery(this).attr("cataloggi-form-type");"login"==e?(jQuery(".cataloggi-display-login-form").fadeIn(500),jQuery(".cataloggi-display-register-form").hide(),jQuery(".cataloggi-display-forgot-pw-form").hide()):"register"==e?(jQuery(".cataloggi-display-login-form").hide(),jQuery(".cataloggi-display-forgot-pw-form").hide(),jQuery(".cataloggi-display-register-form").fadeIn(500)):"forgot_pw"==e?(jQuery(".cataloggi-display-login-form").hide(),jQuery(".cataloggi-display-register-form").hide(),jQuery(".cataloggi-display-forgot-pw-form").fadeIn(500)):(jQuery(".cataloggi-display-login-form").show(),jQuery(".cataloggi-display-register-form").hide(),jQuery(".cataloggi-display-forgot-pw-form").hide())})});